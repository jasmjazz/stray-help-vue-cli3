(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6b885477"],{"00de":function(t,a,s){"use strict";s("622c")},"0351":function(t,a,s){t.exports=s.p+"img/picture04.2117f2d6.png"},"3934c":function(t,a,s){"use strict";s.r(a);var e=function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"order-check"},[s("div",{staticClass:"wrap"},[s("loading",{attrs:{active:t.isLoading,loader:"dots"},on:{"update:active":function(a){t.isLoading=a}}}),t._m(0),s("div",{staticClass:"row sop"},[t._m(1),t._m(2),s("div",{staticClass:"col-md-4 col-sm-12"},[t.order.is_paid?s("div",{staticClass:"alert alert-primary",attrs:{role:"alert"}},[t._v("\n          3. 完成捐糧\n          "),s("i",{staticClass:"fas fa-check-circle"})]):s("div",{staticClass:"alert alert-success",attrs:{role:"alert"}},[t._v("\n          3. 完成捐糧\n        ")])])]),s("div",{staticClass:"row data"},[s("div",{staticClass:"col-lg-7 col-sm-12"},[s("div",{staticClass:"card border-1"},[t._m(3),s("div",{staticClass:"card-body"},[s("table",{staticClass:"table"},[t._m(4),s("tbody",t._l(t.order.products,(function(a){return s("tr",{key:a.id},[s("td",{staticClass:"align-middle"},[t._v(t._s(a.product.title))]),s("td",{staticClass:"align-middle",staticStyle:{"padding-left":"20px"}},[t._v("\n                    "+t._s(a.qty)+"\n                  ")]),s("td",{staticClass:"align-middle text-right"},[t._v("\n                    "+t._s(t._f("currency")(Math.floor(a.final_total/a.qty)))+"\n                  ")])])})),0),s("tfoot",[s("tr",[s("td",{staticClass:"text-right",attrs:{colspan:"2"}},[t._v("總計")]),s("td",{staticClass:"text-right"},[t._v(t._s(t._f("currency")(t.order.total)))])])])])])])]),s("div",{staticClass:"col-lg-5 col-sm-12"},[s("h4",{staticClass:"card"},[t._m(5),s("div",{staticClass:"card-body"},[s("table",{staticClass:"table"},[s("tbody",[s("tr",[s("th",[t._v("姓名")]),s("td",[t._v(t._s(t.order.user.name))])]),s("tr",[s("th",[t._v("電話")]),s("td",[t._v(t._s(t.order.user.tel))])]),s("tr",[s("th",{attrs:{width:"100"}},[t._v("Email")]),s("td",[t._v(t._s(t.order.user.email))])]),s("tr",[s("th",[t._v("地址")]),s("td",[t._v(t._s(t.order.user.address))])]),s("tr",[s("th",[t._v("付款狀態")]),s("td",[t.order.is_paid?s("h6",[s("span",{staticClass:"badge badge-success"},[t._v("付款完成")])]):s("h6",[s("span",{staticClass:"badge badge-danger"},[t._v("尚未付款")])])])])])]),!1===t.order.is_paid?s("div",{staticClass:"text-right"},[s("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:t.payOrder}},[t._v("\n                確認付款\n              ")])]):t._e()])]),!0===t.order.is_paid?s("div",{staticClass:"text-right"},[s("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:function(a){return t.$router.push("/products")}}},[t._v("回去逛逛")])]):t._e()])]),t._m(6),t._m(7)],1)])},i=[function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"banner"},[e("img",{staticClass:"img-fluid",attrs:{src:s("0351"),alt:"流浪貓狗助糧平台"}}),e("div",{staticClass:"text-box"},[e("h1",[t._v("助糧流程")])])])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"col-md-4 col-sm-12"},[s("div",{staticClass:"alert alert-primary",attrs:{role:"alert"}},[t._v("\n          1. 糧食明細\n          "),s("i",{staticClass:"fas fa-check-circle"})])])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"col-md-4 col-sm-12"},[s("div",{staticClass:"alert alert-primary",attrs:{role:"alert"}},[t._v("\n          2. 填寫資料\n          "),s("i",{staticClass:"fas fa-check-circle"})])])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"card-header bg-dark"},[s("h5",[t._v("明細")])])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("thead",[s("th",{attrs:{width:"30%"}},[t._v("品名")]),s("th",{attrs:{width:"35%"}},[t._v("數量")]),s("th",{attrs:{width:"20%"}},[t._v("單價")])])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"card-header bg-dark"},[s("h5",[t._v("捐助人")])])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"modal fade",attrs:{id:"payModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"}},[s("div",{staticClass:"modal-dialog"},[s("div",{staticClass:"modal-content"},[s("div",{staticClass:"modal-header"},[s("h5",{staticClass:"modal-title"},[t._v("愛心助糧")]),s("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[s("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])]),s("div",{staticClass:"modal-body p-3 d-flex align-items-center justify-content-center"},[s("h6",[s("i",{staticClass:"fas fa-check-circle mr-2"}),t._v("付款完成，謝謝你的愛心！\n            ")])])])])])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"modal fade",attrs:{id:"leaveModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"}},[s("div",{staticClass:"modal-dialog"},[s("div",{staticClass:"modal-content"},[s("div",{staticClass:"modal-header"},[s("h5",{staticClass:"modal-title text-light",attrs:{id:"exampleModalLabel"}},[t._v("愛心助糧")]),s("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[s("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])]),s("div",{staticClass:"modal-body"},[s("p",[s("i",{staticClass:"fas fa-exclamation-circle"}),t._v("\n              付款尚未完成，離開將會清空所有記錄，確定離開？\n            ")])]),s("div",{staticClass:"modal-footer"},[s("button",{staticClass:"btn btn-primary btn-stay",attrs:{type:"button","data-dismiss":"modal"}},[t._v("\n              否\n            ")]),s("button",{staticClass:"btn btn-primary btn-leave",staticStyle:{opacity:"0.5"},attrs:{type:"button","data-dismiss":"modal"}},[t._v("\n              是\n            ")])])])])])}],r=(s("ac6a"),s("1157")),c=s.n(r),d={data:function(){return{isLoading:!1,orderId:"",order:{user:{}},nextPage:!1}},methods:{getOrder:function(){var t=this,a="".concat("https://vue-course-api.hexschool.io","/api/").concat("jasmjazz","/order/").concat(t.orderId);t.isLoading=!0,t.$http.get(a).then((function(a){a.data.success&&(t.order=a.data.order)})),t.isLoading=!1},payOrder:function(){var t=this,a="".concat("https://vue-course-api.hexschool.io","/api/").concat("jasmjazz","/pay/").concat(t.orderId);t.isLoading=!0,t.$http.post(a).then((function(a){a.data.success?(t.isLoading=!1,t.getOrder(),c()("#payModal").modal("show"),t.nextPage=!0):(t.isLoading=!1,t.$bus.$emit("message: push","付款失敗","danger"))}))},removeCart:function(){var t=this;t.getCart(),t.carts.carts.forEach((function(a){var s="".concat("https://vue-course-api.hexschool.io","/api/").concat("jasmjazz","/cart/").concat(a.id);t.$http.delete(s).then((function(a){t.$bus.$emit("message:push",a.data.message,"success")}))}))}},beforeRouteLeave:function(t,a,s){var e=this;e.nextPage?s():(c()("#leaveModal").modal("show"),c()(".btn-stay").on("click",(function(){s(!1)})),c()(".btn-leave").on("click",(function(){s()})))},created:function(){this.orderId=this.$route.params.orderId,this.getOrder()}},l=d,n=(s("00de"),s("2877")),o=Object(n["a"])(l,e,i,!1,null,"22286238",null);a["default"]=o.exports},"622c":function(t,a,s){}}]);
//# sourceMappingURL=chunk-6b885477.a10bb6be.js.map